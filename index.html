
<!doctype html>
<html lang="de" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kona‑Quali Rechner — Modern Clean</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .gradient-text { background: linear-gradient(90deg,#0ea5e9,#22c55e);-webkit-background-clip:text;color:transparent; }
  </style>
</head>
<body class="bg-gradient-to-br from-sky-50 via-white to-emerald-50 text-slate-900 min-h-screen">
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    function hmsToSeconds(hms){const p=hms.split(":").map(x=>x.trim());let h=0,m=0,s=0;if(p.length===3){h=+p[0]||0;m=+p[1]||0;s=+p[2]||0;}else if(p.length===2){h=+p[0]||0;m=+p[1]||0;}else if(p.length===1){h=+p[0]||0;}return h*3600+m*60+s;}
    function secondsToHms(t){if(!isFinite(t)||t<=0)return"00:00:00";const h=Math.floor(t/3600),m=Math.floor((t%3600)/60),s=Math.round(t%60);return[h,m,s].map(x=>String(x).padStart(2,'0')).join(':');}

    const AGE_GROUPS=["18-24","25-29","30-34","35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74","75-79","80+"];
    const GENDERS=["Männer","Frauen"];
    const FACTORS={
      "Männer":{"18-24":1.03,"25-29":1.01,"30-34":1.0,"35-39":0.99,"40-44":0.97,"45-49":0.95,"50-54":0.92,"55-59":0.89,"60-64":0.86,"65-69":0.83,"70-74":0.80,"75-79":0.76,"80+":0.72},
      "Frauen":{"18-24":1.02,"25-29":1.01,"30-34":1.0,"35-39":0.985,"40-44":0.965,"45-49":0.94,"50-54":0.905,"55-59":0.87,"60-64":0.835,"65-69":0.80,"70-74":0.765,"75-79":0.73,"80+":0.69}
    };
    const RACES=[
      {name:"IRONMAN Switzerland 2025",thresholdSeconds:hmsToSeconds("09:03:00")},
      {name:"IRONMAN Sweden 2025",thresholdSeconds:hmsToSeconds("08:57:00")},
      {name:"IRONMAN Wisconsin 2025",thresholdSeconds:hmsToSeconds("09:27:00")},
    ];

    const Section=({children})=><section className="rounded-2xl shadow p-6 bg-white/70 backdrop-blur">{children}</section>;
    const LabelRow=({label,children})=>(<div className="grid grid-cols-12 gap-3 items-center"><div className="col-span-4 text-sm text-slate-600">{label}</div><div className="col-span-8">{children}</div></div>);
    const Segmented=({options,value,onChange})=>(<div className="inline-flex rounded-xl bg-white p-1 border">{options.map(opt=>(<button key={opt} onClick={()=>onChange(opt)} className={(value===opt?"px-4 py-2 rounded-lg bg-sky-500 text-white":"px-4 py-2 rounded-lg text-slate-700")}>{opt}</button>))}</div>);
    const Kpi=({label,value,sub})=>(<div className="rounded-xl p-5 bg-white shadow-inner"><div className="text-xs uppercase text-slate-500">{label}</div><div className="mt-1 text-4xl font-extrabold font-mono gradient-text">{value}</div>{sub&&<div className="text-xs text-slate-500 mt-1">{sub}</div>}</div>);

    function App(){
      const [gender,setGender]=useState("Männer");
      const [ageGroup,setAgeGroup]=useState("35-39");
      const [timeStr,setTimeStr]=useState("11:30:00");
      const inputSeconds=hmsToSeconds(timeStr);
      const factor=(FACTORS[gender]&&FACTORS[gender][ageGroup])||1;
      const ageGradedSeconds=Math.round(inputSeconds*factor);
      const comparison=RACES.map(r=>({name:r.name,thresholdSeconds:r.thresholdSeconds,diff:ageGradedSeconds-r.thresholdSeconds,qualifies:ageGradedSeconds<=r.thresholdSeconds}));

      return(<div className="max-w-5xl mx-auto p-6 space-y-6">
        <header><h1 className="text-3xl font-extrabold">Kona‑Quali <span className="gradient-text">Rechner</span></h1></header>
        <Section>
          <LabelRow label="Geschlecht"><Segmented options={GENDERS} value={gender} onChange={setGender}/></LabelRow>
          <LabelRow label="Altersklasse"><select value={ageGroup} onChange={e=>setAgeGroup(e.target.value)} className="px-3 py-2 rounded-xl border">{AGE_GROUPS.map(ag=><option key={ag}>{ag}</option>)}</select></LabelRow>
          <LabelRow label="Ironman‑Zeit"><input value={timeStr} onChange={e=>setTimeStr(e.target.value)} className="px-3 py-2 rounded-xl border font-mono"/></LabelRow>
        </Section>
        <Section><Kpi label="Age‑Graded Time" value={secondsToHms(ageGradedSeconds)} sub={`Faktor ×${factor.toFixed(3)}`}/></Section>
        <Section><h2 className="font-semibold mb-3">Quali‑Schwellen</h2>{comparison.map(c=>(<div key={c.name} className="flex justify-between border-b py-2"><div><div>{c.name}</div><div className="text-xs text-slate-500">Grenze {secondsToHms(c.thresholdSeconds)}</div></div><div className={c.qualifies?"text-emerald-600":"text-rose-600"}>{c.qualifies?"im Rahmen ✓":"fehlend ✗"}</div></div>))}</Section>
        <Section><h2 className="font-semibold mb-3">Andere Altersklassen</h2><table className="w-full text-sm"><thead><tr><th>AK</th><th>{gender}</th></tr></thead><tbody>{AGE_GROUPS.map(ag=>{const f=(FACTORS[gender]&&FACTORS[gender][ag])||1;const sec=Math.round(inputSeconds*f);return(<tr key={ag}><td>{ag}</td><td>{secondsToHms(sec)} <span className="text-xs text-slate-400">(×{f.toFixed(3)})</span></td></tr>);})}</tbody></table></Section>
      </div>);
    }

    const root=ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App/>);
  </script>
</body>
</html>
